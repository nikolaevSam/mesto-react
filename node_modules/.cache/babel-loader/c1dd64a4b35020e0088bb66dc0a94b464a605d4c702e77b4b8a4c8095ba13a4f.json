{"ast":null,"code":"import _classCallCheck from\"/Users/nikolay/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/nikolay/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{configApi}from\"./utils.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._dataUrl=baseUrl;this._headers=headers;}_createClass(Api,[{key:\"_checkStatus\",value:function _checkStatus(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"getInitialCards\",value:function getInitialCards(){var _this=this;return fetch(\"\".concat(this._dataUrl,\"/cards\"),{headers:this._headers}).then(function(res){return _this._checkStatus(res);});}},{key:\"getUserInfo\",value:function getUserInfo(){var _this2=this;return fetch(\"\".concat(this._dataUrl,\"/users/me\"),{headers:this._headers}).then(function(res){return _this2._checkStatus(res);});}},{key:\"setUserInfo\",value:function setUserInfo(data){var _this3=this;return fetch(\"\".concat(this._dataUrl,\"/users/me\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})}).then(function(res){return _this3._checkStatus(res);});}},{key:\"addCard\",value:function addCard(data){var _this4=this;return fetch(\"\".concat(this._dataUrl,\"/cards\"),{method:'POST',headers:this._headers,body:JSON.stringify({name:data.name,link:data.link})}).then(function(res){return _this4._checkStatus(res);});}},{key:\"deleteCard\",value:function deleteCard(cardId){var _this5=this;return fetch(\"\".concat(this._dataUrl,\"/cards/\").concat(cardId),{method:'DELETE',headers:this._headers}).then(function(res){return _this5._checkStatus(res);});}},{key:\"addLike\",value:function addLike(cardId){var _this6=this;return fetch(\"\".concat(this._dataUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:'PUT',headers:this._headers}).then(function(res){return _this6._checkStatus(res);});}},{key:\"deleteLike\",value:function deleteLike(cardId){var _this7=this;return fetch(\"\".concat(this._dataUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:'DELETE',headers:this._headers}).then(function(res){return _this7._checkStatus(res);});}},{key:\"setAvatar\",value:function setAvatar(data){var _this8=this;return fetch(\"\".concat(this._dataUrl,\"/users/me/avatar\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({avatar:data.avatar})}).then(function(res){return _this8._checkStatus(res);});}}]);return Api;}();;var api=new Api(configApi);export default api;","map":{"version":3,"names":["configApi","Api","_ref","baseUrl","headers","_classCallCheck","_dataUrl","_headers","_createClass","key","value","_checkStatus","res","ok","json","Promise","reject","concat","status","getInitialCards","_this","fetch","then","getUserInfo","_this2","setUserInfo","data","_this3","method","body","JSON","stringify","name","about","addCard","_this4","link","deleteCard","cardId","_this5","addLike","_this6","deleteLike","_this7","setAvatar","_this8","avatar","api"],"sources":["/Users/nikolay/dev/mesto-react/src/utils/api.js"],"sourcesContent":["import { configApi } from \"./utils.js\";\n\nclass Api {\n  constructor({ baseUrl, headers }) {\n    this._dataUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkStatus(res) {\n    if (res.ok) {\n      return res.json();\n    } return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._dataUrl}/cards`, {\n      headers: this._headers\n    }).then(res => this._checkStatus(res));\n  }\n\n  getUserInfo() {\n    return fetch(`${this._dataUrl}/users/me`, {\n      headers: this._headers\n    }).then(res => this._checkStatus(res));\n  }\n\n  setUserInfo(data) {\n    return fetch(`${this._dataUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    }).then(res => this._checkStatus(res));\n  }\n\n  addCard(data) {\n    return fetch(`${this._dataUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    }).then(res => this._checkStatus(res));\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._dataUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    }).then(res => this._checkStatus(res));\n  }\n\n  addLike(cardId) {\n    return fetch(`${this._dataUrl}/cards/${cardId}/likes`, {\n      method: 'PUT',\n      headers: this._headers\n    }).then(res => this._checkStatus(res));\n  }\n\n  deleteLike(cardId) {\n    return fetch(`${this._dataUrl}/cards/${cardId}/likes`, {\n      method: 'DELETE',\n      headers: this._headers\n    }).then(res => this._checkStatus(res));\n  }\n\n  setAvatar(data) {\n    return fetch(`${this._dataUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    }).then(res => this._checkStatus(res));\n  }\n};\n\nconst api = new Api(configApi);\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}